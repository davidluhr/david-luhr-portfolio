!function(t,e){"function"==typeof define&&define.amd?define([],e()):"object"==typeof module&&module.exports?module.exports=e():t.zenscroll=e()}(this,function(){"use strict";var v=function(t){return"getComputedStyle"in window&&"smooth"===window.getComputedStyle(t)["scroll-behavior"]};if("undefined"==typeof window||!("document"in window))return{};var t=function(l,n,a){n=n||999,a||0===a||(a=9);var e,s=function(t){e=t},f=document.documentElement,d=function(){return l?l.scrollTop:window.scrollY||f.scrollTop},h=function(){return l?Math.min(l.offsetHeight,window.innerHeight):window.innerHeight||f.clientHeight},w=function(t){return l?t.offsetTop:t.getBoundingClientRect().top+d()-f.offsetTop},m=function(){clearTimeout(e),s(0)},g=function(t,o,i){if(m(),v(l||document.body))(l||window).scrollTo(0,t),i&&i();else{var r=d(),c=Math.max(t,0)-r;o=o||Math.min(Math.abs(c),n);var u=(new Date).getTime();!function n(){s(setTimeout(function(){var t=Math.min(((new Date).getTime()-u)/o,1),e=Math.max(Math.floor(r+c*(t<.5?2*t*t:t*(4-2*t)-1)),0);l?l.scrollTop=e:window.scrollTo(0,e),t<1&&h()+e<(l||f).scrollHeight?n():(setTimeout(m,99),i&&i())},9))}()}},p=function(t,e,n){var o=w(t)-a;return g(o,e,n),o};return{setup:function(t,e){t&&(n=t),(0===e||e)&&(a=e)},to:p,toY:g,intoView:function(t,e,n){var o=t.getBoundingClientRect().height,i=w(t),r=i+o,c=h(),u=d(),l=u+c;i-a<u||c<o+a?p(t,e,n):l<r+a?g(r-c+a,e,n):n&&n()},center:function(t,e,n,o){g(Math.max(w(t)-h()/2+(n||t.getBoundingClientRect().height/2),0),e,o)},stop:m,moving:function(){return!!e},getY:d}},r=t();if("addEventListener"in window&&!v(document.body)&&!window.noZensmooth){"scrollRestoration"in history&&(history.scrollRestoration="manual",window.addEventListener("popstate",function(t){t.state&&t.state.scrollY&&r.toY(t.state.scrollY)},!1));var c=function(t,e){try{history.replaceState({scrollY:r.getY()},""),history.pushState({scrollY:e},"",t)}catch(t){}};window.addEventListener("click",function(t){for(var e=t.target;e&&"A"!==e.tagName;)e=e.parentNode;if(!(!e||1!==t.which||t.shiftKey||t.metaKey||t.ctrlKey||t.altKey)){var n=e.getAttribute("href")||"";if(0===n.indexOf("#"))if("#"===n)t.preventDefault(),r.toY(0),c(window.location.href.split("#")[0],0);else{var o=e.hash.substring(1),i=document.getElementById(o);i&&(t.preventDefault(),c("#"+o,r.to(i)))}}},!1)}return{createScroller:t,setup:r.setup,to:r.to,toY:r.toY,intoView:r.intoView,center:r.center,stop:r.stop,moving:r.moving}});